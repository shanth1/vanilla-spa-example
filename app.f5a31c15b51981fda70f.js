(()=>{"use strict";const e=class{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._element=document.createElement(e);for(const[e,n]of Object.entries(t))this._element.setAttribute(e,n)}get element(){return this._element}subscribe(e,t){e.subscribe(t),t()}},t="adV5tGMO",n=new class{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"page";!(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&console.log("url routing is not available now"),this.pageId=e,window.addEventListener("hashchange",(e=>{this._resolve()})),window.addEventListener("DOMContentLoaded",(()=>{this._resolve()}))}initRoutes(e){this._routes=e}initPageContainer(e){this._pageContainer=e,this._pageContainer.id="page-container"}_activeClassResolver(e,t){window.addEventListener(e,(()=>{""===location.hash?t("#"):t(location.hash)}))}updateActiveClass(e){this._activeClassResolver("hashchange",e),this._activeClassResolver("DOMContentLoaded",e)}navigate(e){location.hash=e}isActive(e){return!location.hash&&"#"===e||location.hash===e}_updatePage(e){this._pageContainer.innerHTML="",this._pageContainer.appendChild(e)}_resolve(){if(""===location.hash){const e=this._routes["/"];return void(e&&this._updatePage(e))}const e=this._routes[location.hash.replace("#","/")];e?this._updatePage(e):this._pageContainer.innerHTML="404 | Not Found"}},s=(e,s)=>{const i=document.createElement("a");return i.innerText=e,i.href=s,i.classList.add("CU5kGIWx"),i.onclick=e=>{e.preventDefault(),n.navigate(s)},n.updateActiveClass((e=>{e===s?i.classList.add(t):i.classList.remove(t)})),i},i=class extends e{constructor(e){super("div"),this._element.innerText=e,this._element.classList.add("header")}updateText(e){this._element.innerText=e}},a="INCREMENT",r="DECREMENT",l="SET_TEXT",o="spa-template-state",d=new class{constructor(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this._reducers=e;const n=JSON.parse(localStorage.getItem(o));this._state=t&&n?n:this._reduce(),this._listeners=[]}_reduce(e,t){return Object.keys(this._reducers).reduce(((n,s)=>(n[s]=this._reducers[s](e&&e[s],t),n)),{})}getState(){return this._state}dispatch(e){this._state=this._reduce(this._state,e),localStorage.setItem(o,JSON.stringify(this._state)),this._listeners.forEach((e=>e()))}subscribe(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter((t=>t!==e))}}}({counter:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{value:0};switch((arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).type){case a:return{...e,value:e.value+1};case r:return{...e,value:e.value-1};default:return e}},input:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{text:"world"},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return t.type===l?{...e,text:t.payload.text}:e}}),c=class extends e{constructor(e,t,n){super("button"),this._element.innerText=e,this._element.classList.add("button"),this._element.style.backgroundColor=t,this._element.onclick=n}},h=new c("Inc","green",(()=>{d.dispatch({type:a})})).element,u=new c("Dec","red",(()=>{d.dispatch({type:r})})).element;window.addEventListener("load",(()=>{(async()=>{if(navigator.serviceWorker)try{const e=await navigator.serviceWorker.register("./sw.js");console.log("SW register success",e)}catch(e){console.error("SW register failed:",e)}})()}));const p=document.getElementById("root"),v=document.createElement("div");n.initPageContainer(v),n.initRoutes({"/":(()=>{const t=document.createElement("div");return t.appendChild((()=>{const t=new e("div").element;t.classList.add("OnZIjsW_");const n=new i;n.subscribe(d,(()=>{n.element.innerText=`Hello, ${d.getState().input.text}!`}));const s=new e("div");return s.element.style.fontSize="26px",s.element.style.marginLeft="20px",s.subscribe(d,(()=>{s.element.innerText=`Clicks: ${d.getState().counter.value}`})),t.appendChild(n.element),t.appendChild(s.element),t})()),t.appendChild((()=>{const e=document.createElement("div");e.classList.add("hZfUyw49"),e.appendChild(new i("Input name").element);const t=(()=>{const e=document.createElement("input");return e.classList.add("input"),e})();return t.value=d.getState().input.text,t.oninput=e=>{t.value=e.target.value,d.dispatch({type:l,payload:{text:e.target.value}})},e.appendChild(t),e})()),t.appendChild((()=>{const e=document.createElement("div");return e.classList.add("BxdDxWAQ"),e.appendChild(new i("Clicker!").element),e.appendChild(h),e.appendChild(u),e})()),t})(),"/about":(()=>{const e=document.createElement("div"),t=new i("About page").element;return e.appendChild(t),e})()}),p.appendChild((()=>{const t=new e("nav").element;return t.classList.add("qEVV8myt"),t.appendChild(s("Home","#")),t.appendChild(s("About","#about")),t})()),p.appendChild(v)})();
//# sourceMappingURL=app.f5a31c15b51981fda70f.js.map